!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.latis=e():t.latis=e()}(window,function(){return function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=21)}([function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(e,n,m){var r;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(r=function(t){var e=m(7),n=m(9),r=m(10),o=m(11),i=m(12),u=m(13),c=m(14),a=m(15),s=m(16),f=m(4),l=[n,r,o,u,c,i,a,e,s].reduce(function(t,e){return e(t)},m(18)),h=m(6)(l);function d(t,e,n,r){var o=l.resolve(t);return arguments.length<2?o:o.then(e,n,r)}function p(r){return function(){for(var t=0,e=arguments.length,n=new Array(e);t<e;++t)n[t]=arguments[t];return h(r,this,n)}}function v(t){for(var e=0,n=arguments.length-1,r=new Array(n);e<n;++e)r[e]=arguments[e+1];return h(t,this,r)}function y(){var e=l._defer();function t(t){e._handler.resolve(t)}function n(t){e._handler.reject(t)}function r(t){e._handler.notify(t)}this.promise=e,this.resolve=t,this.reject=n,this.notify=r,this.resolver={resolve:t,reject:n,notify:r}}return d.promise=function(t){return new l(t)},d.resolve=l.resolve,d.reject=l.reject,d.lift=p,d.try=v,d.attempt=v,d.iterate=l.iterate,d.unfold=l.unfold,d.join=function(){return l.all(arguments)},d.all=function(t){return d(t,l.all)},d.settle=function(t){return d(t,l.settle)},d.any=p(l.any),d.some=p(l.some),d.race=p(l.race),d.map=function(t,e){return d(t,function(t){return l.map(t,e)})},d.filter=function(t,e){return d(t,function(t){return l.filter(t,e)})},d.reduce=p(l.reduce),d.reduceRight=p(l.reduceRight),d.isPromiseLike=function(t){return t&&"function"==typeof t.then},d.Promise=l,d.defer=function(){return new y},d.TimeoutError=f,d}.call(n,m,n,e))||(e.exports=r)}(m(0))},function(n,r,a){(function(c){var e;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(e=function(t){var e,n="undefined"!=typeof setTimeout&&setTimeout,r=function(t,e){return setTimeout(t,e)},o=function(t){return clearTimeout(t)},i=function(t){return n(t,0)};if(void 0!==c&&"[object process]"===Object.prototype.toString.call(c))i=function(t){return c.nextTick(t)};else if(e="undefined"!=typeof MutationObserver&&MutationObserver||"undefined"!=typeof WebKitMutationObserver&&WebKitMutationObserver)i=function(t){var e,n=document.createTextNode("");new t(function(){var t=e;e=void 0,t()}).observe(n,{characterData:!0});var r=0;return function(t){e=t,n.data=r^=1}}(e);else if(!n){var u=a(8);r=function(t,e){return u.setTimer(e,t)},o=u.cancelTimer,i=u.runOnLoop||u.runOnContext}return{setTimer:r,clearTimer:o,asap:i}}.call(r,a,r,n))||(n.exports=e)}(a(0))}).call(this,a(3))},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var a,s=[],f=!1,l=-1;function h(){f&&a&&(f=!1,a.length?s=a.concat(s):l=-1,s.length&&d())}function d(){if(!f){var t=c(h);f=!0;for(var e=s.length;e;){for(a=s,s=[];++l<e;)a&&a[l].run();l=-1,e=s.length}a=null,f=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new p(t,e)),1!==s.length||f||c(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,n,r){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(o=function(){function e(t){Error.call(this),this.message=t,this.name=e.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return(e.prototype=Object.create(Error.prototype)).constructor=e}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(o=function(){return{pending:t,fulfilled:r,rejected:n,inspect:function(t){var e=t.state();return 0===e?{state:"pending"}:0<e?r(t.value):n(t.value)}};function t(){return{state:"pending"}}function n(t){return{state:"rejected",reason:t}}function r(t){return{state:"fulfilled",value:t}}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(o=function(){return t.tryCatchResolve=e,t;function t(u,c){return arguments.length<2&&(c=e),function(t,e,n){var r=u._defer(),o=n.length,i=new Array(o);return a({f:t,thisArg:e,args:n,params:i,i:o-1,call:c},r._handler),r};function a(t,e){if(t.i<0)return c(t.f,t.thisArg,t.params,e);u._handler(t.args[t.i]).fold(n,t,void 0,e)}function n(t,e,n){t.params[t.i]=e,t.i-=1,a(t,n)}}function e(t,e,n,r){try{r.resolve(t.apply(e,n))}catch(t){r.reject(t)}}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(o=function(t){var u=r(2),o=r(4);function c(t,e,n,r){return u.setTimer(function(){t(n,r,e)},e)}return function(t){function n(t,e,n){c(r,t,e,n)}function r(t,e){e.resolve(t)}function i(t,e,n){var r=void 0===t?new o("timed out after "+n+"ms"):t;e.reject(r)}return t.prototype.delay=function(t){var e=this._beget();return this._handler.fold(n,t,void 0,e._handler),e},t.prototype.timeout=function(t,e){var n=this._beget(),r=n._handler,o=c(i,t,e,n._handler);return this._handler.visit(r,function(t){u.clearTimer(o),this.resolve(t)},function(t){u.clearTimer(o),this.reject(t)},r.notify),n},t}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(t,e){},function(e,n,r){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(o=function(t){var s=r(5),f=r(6);return function(d){var o=f(d),n=d.resolve,r=d.all,i=Array.prototype.reduce,u=Array.prototype.reduceRight,c=Array.prototype.slice;return d.any=function(t){for(var e,n,r=d._defer(),o=r._handler,i=t.length>>>0,u=i,c=[],a=0;a<i;++a)if(void 0!==(n=t[a])||a in t){if(0<(e=d._handler(n)).state()){o.become(e),d._visitRemaining(t,a,e);break}e.visit(o,s,f)}else--u;0===u&&o.reject(new RangeError("any(): array must not be empty"));return r;function s(t){c=null,this.resolve(t)}function f(t){this.resolved||(c.push(t),0==--u&&this.reject(c))}},d.some=function(t,e){var n,r,o,i=d._defer(),u=i._handler,c=[],a=[],s=t.length>>>0,f=0;for(o=0;o<s;++o)(void 0!==(r=t[o])||o in t)&&++f;e=Math.max(e,0),n=f-e+1,(f=Math.min(e,f))<e?u.reject(new RangeError("some(): array must contain at least "+e+" item(s), but had "+f)):0===f&&u.resolve(c);for(o=0;o<s;++o)(void 0!==(r=t[o])||o in t)&&d._handler(r).visit(u,l,h,u.notify);return i;function l(t){this.resolved||(c.push(t),0==--f&&(a=null,this.resolve(c)))}function h(t){this.resolved||(a.push(t),0==--n&&(c=null,this.reject(a)))}},d.settle=function(t){return r(t.map(e))},d.map=function(t,e){return d._traverse(e,t)},d.filter=function(t,e){var n=c.call(t);return d._traverse(e,n).then(function(t){return function(t,e){for(var n=e.length,r=new Array(n),o=0,i=0;o<n;++o)e[o]&&(r[i++]=d._handler(t[o]).value);return r.length=i,r}(n,t)})},d.reduce=function(t,e){return 2<arguments.length?i.call(t,a(e),arguments[2]):i.call(t,a(e))},d.reduceRight=function(t,e){return 2<arguments.length?u.call(t,a(e),arguments[2]):u.call(t,a(e))},d.prototype.spread=function(e){return this.then(r).then(function(t){return e.apply(this,t)})},d;function e(t){var e;return t instanceof d&&(e=t._handler.join()),e&&0===e.state()||!e?n(t).then(s.fulfilled,s.rejected):(e._unreport(),s.inspect(e))}function a(r){return function(t,e,n){return o(r,void 0,[t,e,n])}}}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(o=function(){return function(t){var a=t.resolve,u=t.reject,e=t.prototype.catch;function n(t,e,n,r){var o,i,u,c=t.call(e);return"object"!=typeof(u=c)&&"function"!=typeof u||null===u?n(r):(o=n,i=r,a(c).then(function(){return o(i)}))}return t.prototype.done=function(t,e){this._handler.visit(this._handler.receiver,t,e)},t.prototype.catch=t.prototype.otherwise=function(t){return arguments.length<2?e.call(this,t):"function"!=typeof t?this.ensure(r):e.call(this,(o=arguments[1],i=t,function(t){return e=t,((r=n=i)===Error||null!=r&&r.prototype instanceof Error?e instanceof n:n(e))?o.call(this,t):u(t);var e,n,r}));var o,i},t.prototype.finally=t.prototype.ensure=function(e){return"function"!=typeof e?this:this.then(function(t){return n(e,this,o,t)},function(t){return n(e,this,u,t)})},t.prototype.else=t.prototype.orElse=function(t){return this.then(void 0,function(){return t})},t.prototype.yield=function(t){return this.then(function(){return t})},t.prototype.tap=function(t){return this.then(t).yield(this)},t};function r(){throw new TypeError("catch predicate must be a function")}function o(t){return t}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(o=function(){return function(o){return o.prototype.fold=function(r,t){var e=this._beget();return this._handler.fold(function(t,e,n){o._handler(t).fold(function(t,e,n){n.resolve(r.call(this,e,t))},e,this,n)},t,e._handler.receiver,e._handler),e},o}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(o=function(t){var e=r(5).inspect;return function(t){return t.prototype.inspect=function(){return e(t._handler(this))},t}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(o=function(){return function(t){var u=t.resolve;return t.iterate=function(e,t,n,r){return c(function(t){return[t,e(t)]},t,n,r)},t.unfold=c,t;function c(n,r,o,t){return u(t).then(function(e){return u(r(e)).then(function(t){return t?e:u(n(e)).spread(i)})});function i(t,e){return u(o(t)).then(function(){return c(n,r,o,e)})}}}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(o=function(){return function(t){return t.prototype.progress=function(t){return this.then(void 0,void 0,t)},t}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(o=function(){return function(t){return t.prototype.with=t.prototype.withThis=function(t){var e=this._beget(),n=e._handler;return n.receiver=t,this._handler.chain(n,t),e},t}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(o=function(t){var l=r(2).setTimer,h=r(17);return function(t){var e,n=p,r=p;"undefined"!=typeof console&&(e=console,n=void 0!==e.error?function(t){e.error(t)}:function(t){e.log(t)},r=void 0!==e.info?function(t){e.info(t)}:function(t){e.log(t)}),t.onPotentiallyUnhandledRejection=function(t){s(c,t)},t.onPotentiallyUnhandledRejectionHandled=function(t){s(a,t)},t.onFatalRejection=function(t){s(d,t.value)};var o=[],i=[],u=null;function c(t){t.handled||(i.push(t),n("Potentially unhandled rejection ["+t.id+"] "+h.formatError(t.value)))}function a(t){var e=i.indexOf(t);0<=e&&(i.splice(e,1),r("Handled previous rejection ["+t.id+"] "+h.formatObject(t.value)))}function s(t,e){o.push(t,e),null===u&&(u=l(f,0))}function f(){for(u=null;0<o.length;)o.shift()(o.shift())}return t};function d(t){throw t}function p(){}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(o=function(){return{formatError:function(t){var e="object"==typeof t&&null!==t&&(t.stack||t.message)?t.stack||t.message:n(t);return t instanceof Error?e:e+" (WARNING: non-Error used)"},formatObject:n,tryStringify:r};function n(t){var e=String(t);return"[object Object]"===e&&"undefined"!=typeof JSON&&(e=r(t,e)),e}function r(t,e){try{return JSON.stringify(t)}catch(t){return e}}}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(e,n,r){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(o=function(t){return r(19)({scheduler:new(r(20))(r(2).asap)})}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(n,r,o){(function(W){var e;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(e=function(){return function(t){var n=t.scheduler,e=function(){{if(null!=W&&"function"==typeof W.emit)return function(t,e){return"unhandledRejection"===t?W.emit(t,e.value,e):W.emit(t,e)};if("undefined"!=typeof self&&function(){if("function"==typeof CustomEvent)try{var t=new CustomEvent("unhandledRejection");return t instanceof CustomEvent}catch(t){}return!1}())return i=self,u=CustomEvent,function(t,e){var n=new u(t,{detail:{reason:e.value,key:e},bubbles:!1,cancelable:!0});return!i.dispatchEvent(n)};if("undefined"!=typeof self&&function(){if("undefined"!=typeof document&&"function"==typeof document.createEvent)try{var t=document.createEvent("CustomEvent");return t.initCustomEvent("eventType",!1,!0,{}),!0}catch(t){}return!1}())return r=self,o=document,function(t,e){var n=o.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!0,{reason:e.value,key:e}),!r.dispatchEvent(n)}}var r,o;var i,u;return I}(),r=Object.create||function(t){function e(){}return e.prototype=t,new e};function f(t,e){this._handler=t===p?e:function(t){var e=new m;try{t(function(t){e.resolve(t)},n,function(t){e.notify(t)})}catch(t){n(t)}return e;function n(t){e.reject(t)}}(t)}function o(t){return R(t)?t:new f(p,new g(h(t)))}function i(t){return new f(p,new g(new b(t)))}function u(){return T}function c(r,o,i){for(var t,e="function"==typeof o?function(t,e,n){n.resolved||l(i,s,t,r(o,e,t),n)}:s,n=new m,u=i.length>>>0,c=new Array(u),a=0;a<i.length&&!n.resolved;++a)void 0!==(t=i[a])||a in i?l(i,e,a,t,n):--u;return 0===u&&n.become(new _(c)),new f(p,n);function s(t,e,n){c[t]=e,0==--u&&n.become(new _(c))}}function l(t,e,n,r,o){if(H(r)){var i=R(c=r)?c._handler.join():d(c),u=i.state();0===u?i.fold(e,n,void 0,o):0<u?e(n,i.value,o):(o.become(i),a(t,n+1,i))}else e(n,r,o);var c}function a(t,e,n){for(var r=e;r<t.length;++r)s(h(t[r]),n)}function s(t,e){if(t!==e){var n=t.state();0===n?t.visit(t,void 0,t._unreport):n<0&&t._unreport()}}function h(t){return R(t)?t._handler.join():H(t)?d(t):new _(t)}function d(t){try{var e=t.then;return"function"==typeof e?new w(e,t):new _(t)}catch(t){return new b(t)}}function p(){}function v(){}f.resolve=o,f.reject=i,f.never=u,f._defer=function(){return new f(p,new m)},f._handler=h,f.prototype.then=function(t,e,n){var r=this._handler,o=r.join().state();if("function"!=typeof t&&0<o||"function"!=typeof e&&o<0)return new this.constructor(p,r);var i=this._beget(),u=i._handler;return r.chain(u,r.receiver,t,e,n),i},f.prototype.catch=function(t){return this.then(void 0,t)},f.prototype._beget=function(){return t=this._handler,e=this.constructor,n=new m(t.receiver,t.join().context),new e(p,n);var t,e,n},f.all=function(t){return c(P,null,t)},f.race=function(t){return"object"==typeof t&&null!==t?0===t.length?u():1===t.length?o(t[0]):function(t){var e,n,r,o=new m;for(e=0;e<t.length;++e)if(void 0!==(n=t[e])||e in t){if(0!==(r=h(n)).state()){o.become(r),a(t,e+1,r);break}r.visit(o,o.resolve,o.reject)}return new f(p,o)}(t):i(new TypeError("non-iterable passed to race()"))},f._traverse=function(t,e){return c(M,t,e)},f._visitRemaining=a,p.prototype.when=p.prototype.become=p.prototype.notify=p.prototype.fail=p.prototype._unreport=p.prototype._report=I,p.prototype._state=0,p.prototype.state=function(){return this._state},p.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},p.prototype.chain=function(t,e,n,r,o){this.when({resolver:t,receiver:e,fulfilled:n,rejected:r,progress:o})},p.prototype.visit=function(t,e,n,r){this.chain(y,t,e,n,r)},p.prototype.fold=function(t,e,n,r){this.when(new L(t,e,n,r))},q(p,v),v.prototype.become=function(t){t.fail()};var y=new v;function m(t,e){f.createContext(this,e),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function g(t){this.handler=t}function w(t,e){m.call(this),n.enqueue(new C(t,e,this))}function _(t){f.createContext(this),this.value=t}q(p,m),m.prototype._state=0,m.prototype.resolve=function(t){this.become(h(t))},m.prototype.reject=function(t){this.resolved||this.become(new b(t))},m.prototype.join=function(){if(!this.resolved)return this;for(var t=this;void 0!==t.handler;)if((t=t.handler)===this)return this.handler=new b(new TypeError("Promise cycle"));return t},m.prototype.run=function(){var t=this.consumers,e=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<t.length;++n)e.when(t[n])},m.prototype.become=function(t){this.resolved||(this.resolved=!0,this.handler=t,void 0!==this.consumers&&n.enqueue(this),void 0!==this.context&&t._report(this.context))},m.prototype.when=function(t){this.resolved?n.enqueue(new S(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},m.prototype.notify=function(t){this.resolved||n.enqueue(new O(t,this))},m.prototype.fail=function(t){var e=void 0===t?this.context:t;this.resolved&&this.handler.join().fail(e)},m.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},m.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},q(p,g),g.prototype.when=function(t){n.enqueue(new S(t,this))},g.prototype._report=function(t){this.join()._report(t)},g.prototype._unreport=function(){this.join()._unreport()},q(m,w),q(p,_),_.prototype._state=1,_.prototype.fold=function(t,e,n,r){!function(t,e,n,r,o){if("function"!=typeof t)return o.become(n);f.enterContext(n),function(t,e,n,r,o){try{t.call(r,e,n,o)}catch(t){o.become(new b(t))}}(t,e,n.value,r,o),f.exitContext()}(t,e,this,n,r)},_.prototype.when=function(t){A(t.fulfilled,this,t.receiver,t.resolver)};var j=0;function b(t){f.createContext(this),this.id=++j,this.value=t,this.handled=!1,this.reported=!1,this._report()}function x(t,e){this.rejection=t,this.context=e}function E(t){this.rejection=t}q(p,b),b.prototype._state=-1,b.prototype.fold=function(t,e,n,r){r.become(this)},b.prototype.when=function(t){"function"==typeof t.rejected&&this._unreport(),A(t.rejected,this,t.receiver,t.resolver)},b.prototype._report=function(t){n.afterQueue(new x(this,t))},b.prototype._unreport=function(){this.handled||(this.handled=!0,n.afterQueue(new E(this)))},b.prototype.fail=function(t){this.reported=!0,e("unhandledRejection",this),f.onFatalRejection(this,void 0===t?this.context:t)},x.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,e("unhandledRejection",this.rejection)||f.onPotentiallyUnhandledRejection(this.rejection,this.context))},E.prototype.run=function(){this.rejection.reported&&(e("rejectionHandled",this.rejection)||f.onPotentiallyUnhandledRejectionHandled(this.rejection))},f.createContext=f.enterContext=f.exitContext=f.onPotentiallyUnhandledRejection=f.onPotentiallyUnhandledRejectionHandled=f.onFatalRejection=I;var T=new f(p,new p);function S(t,e){this.continuation=t,this.handler=e}function O(t,e){this.handler=e,this.value=t}function C(t,e,n){this._then=t,this.thenable=e,this.resolver=n}function L(t,e,n,r){this.f=t,this.z=e,this.c=n,this.to=r,this.resolver=y,this.receiver=this}function R(t){return t instanceof f}function H(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function A(t,e,n,r){if("function"!=typeof t)return r.become(e);f.enterContext(e),function(t,e,n,r){try{r.become(h(t.call(n,e)))}catch(t){r.become(new b(t))}}(t,e.value,n,r),f.exitContext()}function k(t,e,n,r,o){if("function"!=typeof t)return o.notify(e);f.enterContext(n),function(t,e,n,r){try{r.notify(t.call(n,e))}catch(t){r.notify(t)}}(t,e,r,o),f.exitContext()}function M(t,e,n){try{return t(e,n)}catch(t){return i(t)}}function q(t,e){e.prototype=r(t.prototype),e.prototype.constructor=e}function P(t,e){return e}function I(){}return S.prototype.run=function(){this.handler.join().when(this.continuation)},O.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var e,n=0;n<t.length;++n)k((e=t[n]).progress,this.value,this.handler,e.receiver,e.resolver)},C.prototype.run=function(){var e=this.resolver;!function(t,e,n,r,o){try{t.call(e,n,r,o)}catch(t){r(t)}}(this._then,this.thenable,function(t){e.resolve(t)},function(t){e.reject(t)},function(t){e.notify(t)})},L.prototype.fulfilled=function(t){this.f.call(this.c,this.z,t,this.to)},L.prototype.rejected=function(t){this.to.reject(t)},L.prototype.progress=function(t){this.to.notify(t)},f}}.call(r,o,r,n))||(n.exports=e)}(o(0))}).call(this,o(3))},function(e,n,r){var o;/** @license MIT License (c) copyright 2010-2014 original author or authors */ /** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(t){"use strict";void 0===(o=function(){function t(t){this._async=t,this._running=!1,(this._queue=this)._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var e=this;this.drain=function(){e._drain()}}return t.prototype.enqueue=function(t){this._queue[this._queueLen++]=t,this.run()},t.prototype.afterQueue=function(t){this._afterQueue[this._afterQueueLen++]=t,this.run()},t.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},t.prototype._drain=function(){for(var t=0;t<this._queueLen;++t)this._queue[t].run(),this._queue[t]=void 0;for(this._queueLen=0,this._running=!1,t=0;t<this._afterQueueLen;++t)this._afterQueue[t].run(),this._afterQueue[t]=void 0;this._afterQueueLen=0},t}.call(n,r,n,e))||(e.exports=o)}(r(0))},function(t,e,n){"use strict";n.r(e);var r=n(1),o=n.n(r),i=function(t){var e=o.a.defer(),n=document.createElement("img");return n.onload=function(){e.resolve(n)},n.onerror=function(){e.reject(new Error("Image not found: "+t))},n.src=t,e.promise},u=function(t){for(var e=[],n=0,r=t.length;n<r;n++)e.push(i(t[n].src));return o.a.all(e)};function d(t){return t instanceof HTMLElement&&(t.style.display="none",!0)}function p(t,e,n){u(t).then(e).catch(function(t){if("function"!=typeof n)throw new Error(t);n(t)})}function v(t){return t+"px"}var c=function(){var e=[];function t(){return 0<e.length}return{put:function(t){e.push(t)},get:function(t){return Number.isInteger(t)?e[t]||null:e},clear:function(){e=[]},count:function(){return e.length},isEmpty:function(){return!t()},isFilled:t}},y=function(a){var s,f=c(),e=c(),l=0;function n(){f.isFilled()&&(t(),i(d()),f.clear()),o()}function r(){f.isFilled()&&(i(t(a.maxRowHeight,a.overloadBehaviour)),f.clear());o()}function t(t,e){var n,r,o,i=0,u=0;if(f.isFilled()){if(i=d(),"auto"!==e&&t){var c=(n=i=t,r=f.count(),0<(o=p())?n*o+(r-1)*a.gutter:null);switch(e){case"right":u=s-c;break;case"center":u=(s-c)/2}}f.get().forEach(function(t){var e,n,r=(e=i,n=t.latis.ratio,e*n);h(t).size(r,i).position(u,l),u+=r+a.gutter})}return i}function o(){e.isFilled()&&(e.get().forEach(function(t){var e=t.scrollHeight;h(t).size(s,"auto").position(0,l),i(e)}),e.clear())}function h(t){var n=t.latis;var r={size:function(t,e){return n.width=t,n.height=e,r},position:function(t,e){return n.offsetTop=e,n.offsetLeft=t,r}};return r}function d(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s,e=f.count(),n=p(),r=t-(e-1)*a.gutter;return 0<n?r/n:null}function p(){var e=0;return f.get().forEach(function(t){return e+=t.latis.ratio}),e}function i(t){l+=t+a.gutter}return{add:function(t){return!(!1===t.latis.display||"block"===t.latis.scriptType&&a.ignoreBlocks||(t.latis.stretched?(e.put(t),t.latis.lazy||(f.isFilled()&&r(),o())):(f.put(t),d()<a.maxRowHeight&&n()),0))},clear:function(){f.clear()},forceEnter:function(){n()},enterOverload:r,setWidth:function(t){return s=parseInt(t,10)},getOffsetTop:function(){return l},getFinalHeight:function(){return l-a.gutter},isEmpty:function(){return f.isEmpty()}}};function m(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.default=function(t,e){var n;try{return n=function(t,o){var i,u,e,c=function(t){if(t instanceof HTMLElement)return t;throw new Error("The container reference is not a valid HTMLElement.")}(t),a=m(c.children),s={maxRowHeight:350,minContainerWidth:400,gutter:15,overloadBehaviour:"left",itemSelector:"latis-item",imageSelector:"latis-image",stretchedSelector:"stretched",lazySelector:"lazy",hiddenSelector:"hidden",ignoreBlocks:!1,ignoreImageStretching:!1},f={containerWidth:h(),finalContainerHeight:0,structuresBuilded:!1};function l(){return 0<!i.length?(console.error("There is no items in referenced container. Nothing to process."),!1):(function(t){var e=h(),n=y(s);n.setWidth(e);for(var r=0,o=t.length;r<o;r++){var i=n.add(t[r]);i?i&&e<s.minContainerWidth&&n.forceEnter():hide(t[r])}n.enterOverload(),f.finalContainerHeight=n.getFinalHeight()}(i),t=c,e=f.finalContainerHeight,t.style.height=v(Math.ceil(e)),i.forEach(function(t){var e=t.style,n=t.latis;e.width=v(n.width),e.height=v(n.height),e.top=v(n.offsetTop),e.left=v(n.offsetLeft)}),null);var t,e}function h(){return c.offsetWidth}return!1===["absolute","fixed","relative"].includes((e=c).style.position)&&(e.style.position="relative"),{layout:function(t){var e,n,r;(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(var e in t)s.hasOwnProperty(e)&&(s[e]=t[e])})(t),f.structuresBuilded?l():(e=function(){var t;t=function(t,e,n){if(!t.length)return!1;var r=[],o=[],i=!0,u=!1,c=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var f=a.value;if(!(!f instanceof HTMLElement))if(f.classList.contains(e.itemSelector)){r.push(f);var l={};f.style.position="absolute",f.style.boxSizing="border-box",l.nodeType=f.nodeName,l.display=!f.classList.contains(e.hiddenSelector),l.stretched=f.classList.contains(e.stretchedSelector),l.lazy=f.classList.contains(e.lazySelector);var h=f.querySelector("img."+e.imageSelector);if(h?l.coverImage=h:"IMG"===f.nodeName&&(l.coverImage=f),l.coverImage instanceof HTMLElement){l.scriptType="image";var d=l.coverImage;l.originalWidth=d.naturalWidth,l.originalHeight=d.naturalHeight,!0===e.ignoreImageStretching&&(l.stretched=!1),d.style.display="block",d.style.width="100%",d.style.maxHeight="100%"}else l.scriptType="block",l.originalWidth=parseInt(f.style.width,10)||n,l.originalHeight=parseInt(f.style.height,10)||f.scrollHeight,(!f.style.width||!f.style.height||f.latis&&f.latis.stretched)&&(l.stretched=!0);l.ratio=l.originalWidth/l.originalHeight,f.latis=l}else o.push(f)}}catch(t){u=!0,c=t}finally{try{i||null==s.return||s.return()}finally{if(u)throw c}}return[r,o]}(a,s,h()),i=t[0],u=t[1],f.structuresBuilded=!0,function(t){if(Array.isArray(t)&&t.length)return t.forEach(function(t){d(t)});d(t)}(u),l(),"function"==typeof o&&o()},r=c.querySelectorAll("img."+s.imageSelector),"loading"===document.readystate?document.addEventListener("DOMContentLoaded",function(){p(r,e,n)}):p(r,e,n))}}}(t,e),{layout:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};n.layout(t)}}}catch(t){return console.error(t),{layout:function(){}}}}}]).default});